if(NOT TARGET cosma::cosma)
    list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}")
    include(CMakeFindDependencyMacro)

    find_dependency(MPI)

    set(COSMA_USE_TILEDMM "@COSMA_USE_TILEDMM@")
    if(COSMA_USE_TILEDMM)
        find_dependency(Tiled-MM)
    else()
        set(MKL_PARALLEL "@MKL_PARALLEL@")
        set(MKL_64BIT "@MKL_64BIT@")
        find_dependency(MKL)

        set(ScaLAPACK_FOUND "@ScaLAPACK_FOUND@")
        if(ScaLAPACK_FOUND)
            set(MKL_MPI_TYPE "@MKL_MPI_TYPE@")
            find_dependency(ScaLAPACK)
        endif()
    endif()
    
    # These are bundled with cosma
    #
    find_dependency(grid2grid)
    find_dependency(semiprof)
    find_dependency(options)

    include("${CMAKE_CURRENT_LIST_DIR}/cosmaTargets.cmake")
endif()
